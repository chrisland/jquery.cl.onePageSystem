/*
	
	onePageSystem - min
	
	
	Christian Marienfeld
	www.chrisland.de
	
	Version 1.3.1
	https://github.com/chrisland/onePageSystem
	
	
	Licence MIT

*/
var OPS=OPS||{};OPS.page=function(){var e={handler:"pageBtn",pages:"page",pagePrefix:"page_",displayStyle:"block",offButton:"pageBtnOffline"},t=0,a=0,n=0,r=[],l="#overlay",s=function(e){return"url(img/overlay/"+e+".svg)"},i={},o=function(n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);i=document.getElementsByClassName(e.pages);var l=i.length;if(l>1&&"number"==typeof l)for(var r=0;r<i.length;r++)if(i[r].style.display="none",e.mockup[i[r].id]){var s=g(e.mockup[i[r].id],r);i[r].appendChild(s)}for(var o=function(){var e=this.getAttribute("data-page"),t=this.getAttribute("data-task");(e||t)&&u(this)},d=document.getElementsByClassName(e.handler),r=0;r<d.length;r++)d[r].style.curser="pointer",d[r].addEventListener("click",o);return a?OPS.page.changePageById(a):e.start&&OPS.page.changePageById(e.start),t},g=function(t,a){var n=document.createElement("div");n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.top=0,n.style.left=0;for(var r=0;r<t.length;r++){var l=t[r],s=document.createElement("button");s.style.position="absolute",s.style.zindex=9999999+a+r,s.style.left=l.x+"vw",s.style.top=l.y+"vh",s.style.width=l.width+"vw",s.style.height=l.height+"vh",s.style.border=1,s.style.outline=0,s.style.curser="pointer",s.style.backgroundColor="rgba(0,0,0,0)",1==e.mockupDebug&&(s.style.backgroundColor="rgba(255,200,0,0.5)",s.style.border="1px solid #ffc800",l.title&&(s.innerHTML=l.title)),s.setAttribute("class",e.handler),s.setAttribute("data-page",l.page),s.setAttribute("data-task",l.task),s.setAttribute("data-content",l.content),n.appendChild(s)}return n},d=function(e,t,a){var n=y(null,t,a,e);return n&&(fadePageDom(e),addPageHistory(e,t,a)),!1},u=function(t){if(t.classList.contains(e.offButton))return!1;var a=t.getAttribute("data-page"),n=t.getAttribute("data-task"),r=t.getAttribute("data-content"),l=y(t,n,r,a);return l&&(fadePageDom(a),addPageHistory(a,n,r)),!1},y=function(e,t,a,n){if("back"==t){var r=OPS.page.getPageHistory(),l=r[r.length-2];return l?(l.pageId&&(OPS.page.changePageById(l.pageId,l.pageTask,l.pageContent),OPS.page.kickLastPageHistory(2)),!0):!1}return OPS.task&&OPS.task[t]?OPS.task[t](n,a,e):!0};return fadePageDom=function(n){var r=document.getElementById(e.pagePrefix+n);if(n&&r){for(var l=0;l<i.length;l++)i[l].style.display="none";r.style.display=e.displayStyle,a=t,t=n}return!1},addPageHistory=function(e,t,a){if(e){var n={pageId:e,pageTask:t,pageContent:a};r.push(n)}},getPageHistory=function(){return r?r:!1},kickLastPageHistory=function(e){r=r.slice(0,r.length-e)},openOverlay=function(t,a){var r=document.getElementById(l);r.style.backgroundImage=s(t),r.style.display=e.displayStyle,a&&(clearTimeout(n),n=setTimeout(function(){closeOverlay()},a))},closeOverlay=function(){document.getElementById(l).style.display="none"},{initialize:o,changePageById:d,openOverlay:openOverlay,closeOverlay:closeOverlay}}();